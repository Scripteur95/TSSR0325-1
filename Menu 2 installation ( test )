#!/bin/bash

# Script Ã©crit par Babak

# Couleurs terminal (facultatif si utilisÃ© sans GUI)
rouge='\e[31m'
vert='\e[32m'
bleu='\e[34m'
jaune='\e[33m'
reset='\e[0m'

# Fonction pour installer les logiciels (fictifs ici)
installer() {
    clear
    echo -e "${bleu}ğŸ”§ Installation de : $1${reset}"
    sleep 1
}
installer1() {
    echo -e "${vert}âœ”ï¸  $1 installÃ© avec succÃ¨s !${reset}"
    sleep 1.5
}

# Sous-menu Docker stylÃ©
sous_menu_docker() {
    CHOIX=$(whiptail --title "ğŸš€ DÃ©ploiement Docker CentralisÃ©" --menu "SÃ©lectionnez un logiciel Ã  installer :" 20 60 10 \
        "1" "ğŸ“Š  Portainer     - Interface web Docker" \
        "2" "ğŸ–¥ï¸  GLPI          - Gestion de parc informatique"   \
        "3" "ğŸ“ˆ  Zabbix        - Supervision rÃ©seau avancÃ©e" \
        "4" "ğŸ“¡  Nagios        - Monitoring et alertes systÃ¨me" \
        "5" "ğŸ“  XiVO          - TÃ©lÃ©phonie IP (VOIP)" \
        "6" "â†©ï¸  Retour" 3>&1 1>&2 2>&3)

    case $CHOIX in
        1) installer "Docker" && ./scripts/install_docker.sh && installer1 "Docker" ;;
        2) installer "GLPI (Gestion de parc)" && ./scripts/install_glpi.sh && installer1 "GLPI (Gestion de parc)" ;;
        3) installer "Zabbix (Supervision)" && ./scripts/install_zabbix.sh && installer1 "Zabbix (Supervision)";;
        4) installer "Nagios (Supervision)" && ./scripts/install_nagios.sh && installer1 "Nagios (Supervision)";;
        5) installer "XiVO (VOIP)" && ./scripts/install_xivo.sh && installer1 "XiVO (VOIP)" ;;
        6) return ;;
        *) echo -e "${rouge}âŒ Option invalide${reset}" ;;
    esac
}

# Menu principal
while true; do
    CHOIX_PRINCIPAL=$(whiptail --title "ğŸ§­ Menu Principal Administration" --menu "Que souhaitez-vous faire ?" 15 60 5 \
        "1" "ğŸ› ï¸  Installation de logiciels via Docker"   \
        "2" "ğŸšª Quitter" 3>&1 1>&2 2>&3)

    case $CHOIX_PRINCIPAL in
        1) sous_menu_docker ;;
        2) #clear
           echo -e "${jaune}ğŸ‘‹ Merci d'avoir utilisÃ© ce menu, Ã  bientÃ´t.${reset}"
           exit 0 ;;
        *) echo -e "${rouge}âŒ Option invalide${reset}" ;;
    esac
done
